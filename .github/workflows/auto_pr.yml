name: Auto PR (feature → develop)

on:
  push:
    branches:
      - "feat/**"
      - "feature/**"

permissions:
  pull-requests: write
  contents: read

jobs:
  auto-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Create or update PR
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.AUTO_PR_TOKEN || secrets.GITHUB_TOKEN }}
          base: develop
          branch: ${{ github.ref_name }}
          title: "feat: ${{ github.ref_name }} → develop"
          body: |
            Auto PR created by workflow.

            Source: `${{ github.ref_name }}`
            Target: `develop`

            - CI will run automatically.
            - Bench regression check runs on demand or via label.
          draft: true
          labels: |
            feature
            auto-pr
          assignees: |
            ${{ github.actor }}
